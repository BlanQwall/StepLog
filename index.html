<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>StepLog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 1.5rem;
      line-height: 1.6;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .lang-switch button {
      border: 1px solid #ccc;
      border-radius: 999px;
      padding: 0.25rem 0.75rem;
      cursor: pointer;
      background: transparent;
      font-size: 0.9rem;
    }
    .lang-switch button.active {
      border-color: #333;
      font-weight: 600;
    }
    .hero-center {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-top: 2.5rem;
      text-align: center;
    }

    .hero-center-logo {
      margin-top: 1.8rem;
      margin-bottom: 2.2rem;
    }

    .hero-center-logo img {
      height: auto;
      display: block;
    }

    .hero-center-title {
      font-size: 1.4rem;
      margin: 0.4rem 0 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>StepLog</h1>
    <div class="lang-switch">
      <button type="button" data-lang-switch="zh">中文</button>
      <button type="button" data-lang-switch="en">English</button>
    </div>
  </header>

  <!-- 中文内容（默认隐藏，防止无 JS 时双语一起显示） -->
  <main data-lang="zh" style="display:none">
    <div class="hero-center">
      <h2 class="hero-center-title">正在进行的计划</h2>
      <a class="hero-center-logo" href="berlin-2026/index-zh.html">
        <img src="berlin-2026/assets/Berlin_2026_logo-zh_200px.png" alt="Berlin 2026 当前项目" />
      </a>
    </div>
    <div style="margin-top: 2rem; margin-bottom: 2rem;">
      <hr style="border: none; border-top: 1px solid #ddd; max-width: 280px;">
    </div>
    <footer class="site-footer">
      <div class="container footer-inner">
        <p>StepLog · 计划在心，脚踏实地。</p>
        <p class="footer-sub">想了解我是谁？看这里 © <a href="https://github.com/BlanQwall/">BAI Qiang</a> · StepLog项目托管于 <a href="https://github.com/BlanQwall/StepLog">GitHub 仓库</a></p>
      </div>
    </footer>
  </main>

  <!-- English content（默认显示） -->
  <main data-lang="en">
    <div class="hero-center">
      <h2 class="hero-center-title">Current project</h2>
      <a class="hero-center-logo" href="berlin-2026/index.html">
        <img src="berlin-2026/assets/Berlin_2026_logo_200px.png" alt="Berlin 2026 current project" />
      </a>
    </div>
    <div style="margin-top: 2rem; margin-bottom: 2rem;">
      <hr style="border: none; border-top: 1px solid #ddd; max-width: 280px;">
    </div>
    <footer class="site-footer">
      <div class="container footer-inner">
        <p>StepLog · Record every step toward the next goal</p>
        <p class="footer-sub">A <a href="https://github.com/BlanQwall/StepLog">GitHub Repertory</a> of © <a href="https://github.com/BlanQwall/">BAI Qiang</a> </p>
      </div>
    </footer>
  </main>

  <script>
    (function () {
      const STORAGE_KEY = "steplog-lang";

      function detectPreferredLang() {
        // 1. 如果有用户保存的选择，优先用它
        try {
          const stored = localStorage.getItem(STORAGE_KEY);
          if (stored === "zh" || stored === "en") {
            return stored;
          }
        } catch (e) {
          // localStorage 不可用时忽略
        }

        // 2. 否则根据浏览器语言自动判断
        const candidates = navigator.languages && navigator.languages.length
          ? navigator.languages
          : [navigator.language || navigator.userLanguage || "en"];

        const hasZh = candidates.some(function (lang) {
          if (!lang) return false;
          return lang.toLowerCase().startsWith("zh");
        });

        return hasZh ? "zh" : "en";
      }

      function applyLang(lang) {
        // 设置 <html lang="...">，对 SEO 和辅助功能更友好
        document.documentElement.lang = (lang === "zh") ? "zh-Hans" : "en";

        // 切换内容区域显示
        document.querySelectorAll("[data-lang]").forEach(function (el) {
          if (el.getAttribute("data-lang") === lang) {
            el.style.display = "";
          } else {
            el.style.display = "none";
          }
        });

        // 更新按钮状态
        document.querySelectorAll("[data-lang-switch]").forEach(function (btn) {
          if (btn.getAttribute("data-lang-switch") === lang) {
            btn.classList.add("active");
          } else {
            btn.classList.remove("active");
          }
        });

        // 记住用户选择
        try {
          localStorage.setItem(STORAGE_KEY, lang);
        } catch (e) {
          // localStorage 不可用时忽略
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        const lang = detectPreferredLang();
        applyLang(lang);

        // 绑定切换按钮
        document.querySelectorAll("[data-lang-switch]").forEach(function (btn) {
          btn.addEventListener("click", function () {
            const targetLang = btn.getAttribute("data-lang-switch");
            applyLang(targetLang);
          });
        });
      });
    })();
  </script>
</body>
</html>